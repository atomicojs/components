import{jsx as i}from"atomico/jsx-runtime";import{c as x,useRef as S,useEffect as h,useProp as B,useState as I}from"atomico";import K from"keen-slider";import{useProxySlot as P}from"@atomico/hooks/use-slot";import{css as w}from"atomico";var g=w`.keen-slider{max-height:100%}.keen-slider:not([data-keen-slider-disabled]){align-content:flex-start;display:flex;overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;touch-action:pan-y;-webkit-tap-highlight-color:transparent;width:100%}.keen-slider:not([data-keen-slider-disabled]) .keen-slider__slide{position:relative;overflow:hidden;width:100%;min-height:100%}.keen-slider:not([data-keen-slider-disabled])[data-keen-slider-reverse]{flex-direction:row-reverse}.keen-slider:not([data-keen-slider-disabled])[data-keen-slider-v]{flex-wrap:wrap}.keen-slider:not([data-keen-slider-disabled])[data-keen-slider-moves] *{pointer-events:none}`;import{useResponsiveState as c}from"@atomico/hooks/use-responsive-state";function u(e){let[o,y]=B("slider"),[m,p]=I(),f=S(),v=S(),a=P(v),r=c(e.slidesPerView||""),b=c(e.slidesSpacing||""),l=c(e.slidesOrigin||""),d=()=>o.next(),k=()=>o.prev();return h(()=>{if(!(!o||!e.autoplay))if(m){let t=setTimeout(()=>p(0),e.autoplayLoop);return()=>clearTimeout(t)}else{let t=setInterval(()=>d(),e.autoplayLoop);return()=>clearInterval(t)}},[o,m,e.autoplay,e.autoplayLoop]),h(()=>{if(!a.length)return;let t={loop:e.loop,drag:e.drag,disabled:e.disabled,rtl:e.rtl,rubberband:e.rubberband,initial:e.initial,mode:e.mode,vertical:e.vertical,slides:{perView:r==="auto"?r:Number(r),spacing:Number(b),origin:l==="auto"||l==="center"?l:Number(l)},slideChanged(n){console.log(n.track.details.rel)}};for(let n in t)t[n]==null&&delete t[n];let s=new K(f.current,t);return y(s),()=>s.destroy()},[a.length,r,b,l]),i("host",{shadowDom:!0,next:d,prev:k,onclick:t=>p(t.timeStamp)},i("slot",{ref:v,name:"slide"}),i("slot",{onclick:k,name:"to-left"}),i("slot",{onclick:d,name:"to-right"}),i("div",{class:"keen-slider",ref:f},a.map((t,s)=>{let n=`slide-${s}`;return t.slot=n,i("div",{class:"keen-slider__slide"},i("slot",{name:n}))})))}u.props={loop:Boolean,drag:Boolean,disabled:Boolean,vertical:Boolean,rtl:Boolean,rubberband:Boolean,autoplay:Boolean,autoplayLoop:{type:Number,value:2e3},initial:Number,mode:{type:String,value:()=>"snap"},slidesPerView:String,slidesSpacing:String,slidesOrigin:String,slider:{type:null,event:{type:"CreateSlider"}}};u.styles=g;var L=x(u);customElements.define("atomico-keen-slider",L);export{L as KeenSlider};
